<div class="visit-form-container">
  <div class="visit-form-header">
    <h2>Disponibilice un horario de visita a su propiedad</h2>
    <p>Rellene los detalles para programar su visita a la propiedad</p>
  </div>

  <form [formGroup]="visitForm" (ngSubmit)="onSubmit()" class="visit-form">
    <div class="form-row">
      <div class="form-group">
        <app-input
          label="ID de la propiedad"
          type="number"
          formControlName="propertyId"
          [required]="true"
          placeholder="Ingrese el ID de la propiedad"
          [ngClass]="visitForm.get('propertyId')?.touched && visitForm.get('propertyId')?.invalid ? 'input-error' : ''"
        ></app-input>
        <span *ngIf="visitForm.get('propertyId')?.touched && visitForm.get('propertyId')?.invalid" class="error-message">El ID de la propiedad es requerido</span>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <app-input
          label="Fecha y hora de inicio"
          type="datetime-local"
          formControlName="startDate"
          [required]="true"
          [ngClass]="visitForm.get('startDate')?.touched && visitForm.get('startDate')?.errors?.['dateInPast'] ? 'input-error' : ''"
        ></app-input>
        <span *ngIf="visitForm.get('startDate')?.touched && visitForm.get('startDate')?.errors?.['dateInPast']" class="error-message">
          La fecha no puede ser anterior a hoy
        </span>
      </div>

      <div class="form-group">
        <app-input
          label="Fecha y hora de fin"
          type="datetime-local"
          formControlName="endDate"
          [required]="true"
          [ngClass]="visitForm.get('endDate')?.touched && visitForm.get('endDate')?.errors?.['endDateBeforeStart'] ? 'input-error' : ''"
        ></app-input>
        <span *ngIf="visitForm.get('endDate')?.touched && visitForm.get('endDate')?.errors?.['endDateBeforeStart']" class="error-message">
          La fecha de fin debe ser posterior a la fecha de inicio
        </span>
      </div>
    </div>

    <div class="form-actions">
      <app-button
        [label]="'Programar visita'"
        [isSubmit]="true"
        [disabled]="visitForm.invalid"
        type="primary"
        [ngClass]="{'button-disabled': visitForm.invalid}"
      ></app-button>
    </div>
  </form>
</div>