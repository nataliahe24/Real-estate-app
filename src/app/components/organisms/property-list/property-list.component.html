<div class="property-list">
    <section class="white-section">
        <h2>Listado de propiedades</h2>
        <div class="search-container">
          <app-category-select
          [formControl]="categoryControl"
          class="category-select"
          ></app-category-select>
          <app-input
            type="text"
            [formControl]="searchControl"
            placeholder="Buscar por barrio, ciudad o departamento..."
            class="search-input"
          ></app-input>
          
            <select
          [formControl]="sortByControl"
          class="filter-input"
          >
          <option value="" disabled selected>Ordenar por</option>
          <option *ngFor="let option of sortOptions" [value]="option.value">
           {{ option.label }}
          </option>
         </select>
         
          <button
          type="button"
          class="order-toggle"
          (click)="toggleOrder()"
          [attr.aria-label]="orderAsc ? 'Orden ascendente' : 'Orden descendente'"
        >
          <span 
            class="material-icons" 
            [title]="orderAsc ? 'Ascendente' : 'Descendente'"
          >
            {{ orderAsc ? 'arrow_upward' : 'arrow_downward' }}
          </span>
        </button>
        <button
          type="button"
          class="filters-toggle"
          (click)="showFilters = true"
          aria-label="Mostrar filtros avanzados"
        >
          <img src="assets/images/filter_search_icon_.png" alt="Filtros avanzados" width="25" height="25" />
        </button>
        </div>
  
        <app-filters-modal
          [open]="showFilters"
          [config]="{
            roomsControl: roomsControl,
            bathroomsControl: bathroomsControl,
            minPriceControl: minPriceControl,
            maxPriceControl: maxPriceControl,
            sortByControl: sortByControl,
            sortOptions: sortOptions
          }"
          (close)="showFilters = false"
        ></app-filters-modal>
      <div class="table-container" *ngIf="!loading">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Categoría</th>
              <th>Dirección</th>
              <th>Habitaciones</th>
              <th>Baños</th>
              <th>Precio</th>
              <th>Ubicación</th>
              <th>Status</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let property of properties">
              <td>{{ property.id }}</td>
              <td>{{ property.name }}</td>
              <td>{{ property.category }}</td>
              <td>{{ property.address }}</td>
              <td>{{ property.rooms }}</td>
              <td>{{ property.bathrooms }}</td>
              <td>{{ property.price | currency:'COP':'symbol':'1.0-0' }}</td>
              <td>{{ property.city }}</td>
              <td>{{ property.publicationStatus }}</td>
              <td class="actions-cell">
                <app-button
                  [type]="'secondary'"
                  [label]="' '"
                  [ariaLabel]="'Eliminar propiedad'">
                  <span class="material-icons">delete</span>
                </app-button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="loading-spinner" *ngIf="loading">
        <span>Cargando...</span>
      </div>
    </section>
  </div>