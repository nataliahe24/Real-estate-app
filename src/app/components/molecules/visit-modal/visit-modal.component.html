<div class="visit-modal">
  <h2>Programar visita - {{data.propertyName}}</h2>
  
  <form [formGroup]="visitForm" (ngSubmit)="onSubmit()">
    <div class="schedule-selection">
      <h3>Selecciona un horario:</h3>
      <div class="schedule-options">
        <div *ngFor="let visit of data.visits" 
             class="schedule-option"
             [class.selected]="selectedVisitId === visit.id"
             (click)="selectVisit(visit.id)">
          <p>
            <i class="material-icons">event</i>
            {{visit.startDate | date:'MMM d, y'}}
          </p>
          <p>
            <i class="material-icons">schedule</i>
            {{visit.startDate | date:'h:mm a'}} - {{visit.endDate | date:'h:mm a'}}
          </p>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Correo electr칩nico</label>
      <input 
        type="email" 
        id="email"
        formControlName="email"
        placeholder="ejemplo@correo.com"
        [ngClass]="{'input-error': visitForm.get('email')?.invalid && (visitForm.get('email')?.dirty || visitForm.get('email')?.touched)}">
    </div>

    <div *ngIf="visitForm.get('email')?.invalid && (visitForm.get('email')?.dirty || visitForm.get('email')?.touched)" class="invalid-feedback">
      <span *ngIf="visitForm.get('email')?.errors?.['required']">El correo electr칩nico es requerido</span>
      <span *ngIf="visitForm.get('email')?.errors?.['email']">El correo electr칩nico no es v치lido</span>
    </div>

    <div class="modal-actions">
      <button type="button" class="cancel-btn" (click)="onCancel()">Cancelar</button>
      <button type="submit" class="confirm-btn" [disabled]="!visitForm.valid || !selectedVisitId">
        Confirmar visita
      </button>
    </div>
  </form>
</div> 